<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title>三星网上商城</title>
	<style>
		.s_shopcar {
			height: 70px;
		}

		.s_shopcar_cen {
			width: 1280px;
			height: 70px;
			background: #fff;
			margin: 0 auto;
			border-bottom: 1px solid #dfdfdf;
		}

		.s_shop_p {
			width: 1220px;
			height: 44px;
			margin-top: 20px;
		}

		.s_shop_img {
			vertical-align: middle;
		}

		.s_span {
			display: inline-block;
			line-height: 44px;
			font-weight: 999;
			color: rgb(22, 20, 20);
			font-size: 16px;
			margin-left: 10px;
		}

		.s_shop_a {
			text-align: center;
			display: inline-block;
			width: 130px;
			height: 40px;
			border: 1px solid #000;
			border-radius: 30px;
			font-size: 12px;
			font-weight: 900;
			line-height: 40px;
			margin-left: 10px;
		}

		.s_section {
			height: 104px;
		}

		.s_section_cen {
			width: 1220px;
			height: 104px;
			margin: 0 auto;
			border-top: 1px solid #e5e5e5;
		}

		.s_payment-list {
			width: 736px;
			height: 103px;
			text-align: center;
			margin: 22px 0 25px;
			float: left;
			box-sizing: border-box;
		}

		ul {
			text-align: center;
		}

		li {
			width: 99px;
			height: 39px;
			display: inline-block;
			text-align: center;
			border: 1px solid #dcdcdc;
			border-radius: 3px;
		}

		li img {
			width: 97px;
			height: 37px;
			vertical-align: middle;
		}

		.s_isHide {
			width: 99px;
			height: 39px;
			display: inline-block;
			text-align: center;
			border: 1px solid #dcdcdc;
			border-radius: 3px;
			margin-left: 20px;
			margin-top: 20px;
		}

		.s_isHide img {
			width: 97px;
			height: 37px;
			vertical-align: middle;
		}

		.s_payment-list_right {
			width: 483px;
			height: 102px;
			text-align: center;
			float: right;
			border-left: 1px solid #dcdcdc;
		}

		.s_bom {
			margin-top: 20px;
		}

		ul .s_ul_img {
			width: 99px;
			height: 39px;
			display: inline-block;
			border: 1px solid #dcdcdc;
			border-radius: 3px;
			vertical-align: middle;
			margin-top: 15px;
		}

		ul .s_ul_img img {
			width: 97px;
			height: 37px;
			vertical-align: middle;
		}

	</style>
	<link rel="stylesheet" type="text/css" href="css/reset.css" />
	<link rel="stylesheet" type="text/css" href="css/common.css" />
	<link rel="stylesheet" type="text/css" href="css/iconfont.css" />
	<link rel="stylesheet" type="text/css" href="css/home.css" />
	<link rel="stylesheet" type="text/css" href="css/shopping.css">
	<link rel="stylesheet" type="text/css" href="css/swiper.min.css">
	<link rel="stylesheet" type="text/css" href="css/public.css">
</head>
<body>
	<div id="main_wrapper">

		<div class="s_header">

		</div>
		<!-- 内容放置区 -->

		<!-- s_shopcar go-->
		<div class="s_shopcar">

			<div class="s_shopcar_cen">
				<p class="s_shop_p">
					<img class="s_shop_img" src="img/shoppingCat/s-sign.png">
					<span class="s_span">登陆三星账号，购物可获取或使用三星积分</span>
					<a href="#" class="s_shop_a">登入三星账号</a>
				</p>
			</div>
		</div>
		<!-- s_shopcar end-->
		<div class="phone_all content">

			<div class="phone_list">
				<div class="phone_list_img">
					<a href="#">
						<img src="images/nans.jpg" />
					</a>
				</div>
				<div class="phone_list_all">
					<a href="#">
						<img src="images/nov.png" />
						<span>Galaxy S10 512GB版本</span>
						<span>新品上市 享六重好礼 </span>
						<span class="price">¥3599.00</span>
					</a>
					<span id="add_cart">加入购物车</span>
				</div>
				<div class="phone_list_all">
					<a href="#">
						<img src="images/nov.png" />
						<span>Galaxy S10 512GB版本</span>
						<span>新品上市 享六重好礼 </span>
						<span class="price">￥3799</span>
					</a>
					<span id="add_cart">加入购物车</span>
				</div>
				<div class="phone_list_all">
					<a href="#">
						<img src="img/s_Galaxy.jpg" />
						<span>Galaxy S10+</span>
						<span>新品上市 享六重好礼</span>
						<span class="price">￥3799</span>
					</a>
					<span id="add_cart">加入购物车</span>
				</div>
				<div class="phone_list_all">
					<a href="mate20_details.html">
						<img src="images/nov.png" />
						<span>Galaxy S10</span>
						<span>新品上市 享六重好礼</span>
						<span class="price">￥3799</span>
					</a>
					<span id="add_cart">加入购物车</span>
				</div>
				<div class="phone_list_all">
					<a href="mate20_details.html">
						<img src="img/s_Galaxy.jpg" />
						<span>Galaxy S10</span>
						<span>新品上市 享六重好礼 </span>
						<span class="price">￥3799</span>
					</a>
					<span id="add_cart">加入购物车</span>
				</div>
				<div class="phone_list_all">
					<a href="mate20_details.html">
						<img src="img/s_Galaxy.jpg" />
						<span>Galaxy S10+</span>
						<span>新品上市 享六重好礼</span>
						<span class="price">￥3799</span>
					</a>
					<span id="add_cart">加入购物车</span>
				</div>
				<div class="phone_list_all">
					<a href="mate20_details.html">
						<img src="img/s_Galaxy.jpg" />
						<span>Galaxy S10+</span>
						<span>新品上市 享六重好礼</span>
						<span class="price">￥3799</span>
					</a>
					<span id="add_cart">加入购物车</span>
				</div>
				<div class="phone_list_all">
					<a href="#">
						<img src="img/s_Galaxy.jpg" />
						<span>Galaxy S10+</span>
						<span>新品上市 享六重好礼 </span>
						<span class="price">￥3799</span>
					</a>
					<span id="add_cart">加入购物车</span>
				</div>
				<div class="phone_list_all">
					<a href="#">
						<img src="img/s_Galaxy.jpg" />
						<span>Galaxy S10+</span>
						<span>新品上市 享六重好礼</span>
						<span class="price">￥3799</span>
					</a>
					<span id="add_cart">加入购物车</span>
				</div>
				<div class="phone_list_all">
					<a href="#">
						<img src="img/s_Galaxy.jpg" />
						<span>Galaxy S10+</span>
						<span>新品上市 享六重好礼 </span>
						<span class="price">￥3799</span>
					</a>
					<span id="add_cart">加入购物车</span>
				</div>
				<div class="phone_list_all">
					<a href="#">
						<img src="img/s_Galaxy.jpg" />
						<span>Galaxy S10+</span>
						<span>新品上市 享六重好礼 </span>
						<span class="price">￥3799</span>
					</a>
					<span id="add_cart">加入购物车</span>
				</div>
				<div class="phone_list_all">
					<a href="#">
						<img src="img/s_Galaxy.jpg" />
						<span>Galaxy S10+</span>
						<span>新品上市 享六重好礼 </span>
						<span class="price">￥3799</span>
					</a>
					<span id="add_cart">加入购物车</span>
				</div>
				<div class="phone_list_all">
					<a href="#">
						<img src="images/s_293X293.jpg" />
						<span>Galaxy A40s</span>
						<span>新品上市 享六重好礼 </span>
						<span class="price">￥3799</span>
					</a>
					<span id="add_cart">加入购物车</span>
				</div>
				<div class="phone_list_all">
					<a href="#">
						<img src="img/s_Galaxy.jpg" />
						<span>Galaxy S10+ </span>
						<span>新品上市 享六重好礼 </span>
						<span class="price">￥3799</span>
					</a>
					<span id="add_cart">加入购物车</span>
				</div>
			</div>
		</div>

		<!-- s_section go-->
		<div class="s_section">
			<div class="s_section_cen">
				<div class="s_payment-list">
					<p>支付方式</p>
					<ul>
						<li>
							<a href="#">
								<img src="img/shoppingCat/s_pay_01.jpg">
							</a>
						</li>
						<li class="s_isHide">
							<a href="#">
								<img src="img/shoppingCat/s_pay_05.jpg">
							</a>
						</li>
					</ul>
				</div>

				<div class="s_payment-list_right">
					<p class="s_bom">物流保证</p>
					<ul>
						<li class="s_ul_img">
							<a href="#">
								<img src="img/shoppingCat/s_pay_06.jpg">
							</a>
						</li>
					</ul>
				</div>
			</div>
		</div>
		<!-- s_section End-->

	</div>
	<!-- main_wrapper end-->

	<div class="s_footer">

	</div>

	<!-- fixed_menu go-->
	<div class="fixed_menu">
		<!--<div class="menu_list">-->
		<a id="cart_href">
			<span class="iconfont icon-xiazai49"></span>
			<span id="num">0</span>
			<i class="cart">购物车</i>
		</a>
		<a href="#">
			<span class="iconfont icon-wodekefu"></span>
			<i class="service">在线客服</i>
		</a>
		<a href="#">
			<span class="iconfont icon-yijianfankui"></span>
			<i class="advice">意见反馈</i>
		</a>
		<a href="#">
			<span class="iconfont icon-fanhuidingbu"></span>
			<i class="goTop">返回顶部</i>
		</a>
		<!--</div>-->
	</div>
	<!-- fixed_menu end-->
	<script type="text/javascript" src="js/jquery.min.js"></script>
	<script type="text/javascript" src="js/login.js"></script>
	<!--<script type="text/javascript" src="js/common.js"></script>-->
	<script>
		$(function () {
			//是否是刚注册
		    $('.s_header').load('publheader.html');
		    $('.s_footer').load('pubfooter.html');
			if (localStorage.getItem("reg_phone")) {
				$("#login_page").css("visibility", "visible");
			}
			//				显示用户
			if (localStorage.getItem("phoneNum")) {
				$(".logged").css({
					visibility: "visible",
					left: "-40px"
				});
				$("#login").css("display", "none");
				$("#login_page").css("visibility", "hidden");
			}
			//购物车等固定栏动画
			$(".fixed_menu>a:nth-child(1)").hover(function () {
				$(".cart").show();
			}, function () {
				$(".cart").hide();
			})
			$(".fixed_menu>a:nth-child(2)").hover(function () {
				$(".service").show();
			}, function () {
				$(".service").hide();
			})
			$(".fixed_menu>a:nth-child(3)").hover(function () {
				$(".advice").show();
			}, function () {
				$(".advice").hide();
			})
			$(".fixed_menu>a:nth-child(4)").hover(function () {
				$(".goTop").show();
			}, function () {
				$(".goTop").hide();
			}).click(function () {
				$("body,html").animate({
					scrollTop: 0
				}, 500);
			})
			$(window).scroll(function () {
				if ($(window).scrollTop() < 1000) {
					$(".fixed_menu>a:nth-child(4)").hide();
				} else {
					$(".fixed_menu>a:nth-child(4)").show();
				}
			});
			//显示login页面
			$("#login").click(function () {
				$("#login_page").css({
					"visibility": "visible"
				}).siblings().css("opacity", 0.6);

			});
			$("#del_btn").click(function () {
				$("#login_page").css({
					"visibility": "hidden"
				}).siblings().css("opacity", 1);
			});
			//				客户服务
			$(".user_service").hover(function () {

				$(".user_que").show();
			}, function () {
				$(".user_que").hide();
			});
			$("#search_i").focus(function () {
				console.log($(this));

				$(this).val(" ");
			}).blur(function () {
				$(this).val("华为Mate20 X");
			});

		});
		//			购物车效果
		$(function () {
			var obj = {
				phoneNum: JSON.parse(localStorage.getItem("phoneNum")),
				pwd: JSON.parse(localStorage.getItem("pwd")),
				btn: $("#login_btn"),
				oGoods: $(".phone_list"),
				oCart: $("#cart_href"),
				Num: $("#num"),
				cartNum: $("#cartnum")
			}
			new ShowGoods(obj).init();
		});
		class ShowGoods {
			constructor(obj) {
				this.btn = obj.btn;
				this.phoneNum = obj.phoneNum;
				this.btn = obj.btn;
				this.oGoods = obj.oGoods;
				this.oCart = obj.oCart;
				this.Num = obj.Num;
				this.cartNum = obj.cartNum;
			}
			init() {//初始化
				this.loadingGoods();
				//					alert(1);
			}
			loadingGoods() {
				$.getJSON("./data/shoppingCat.json", function (res) {
					var str = "";
					for (var i = 0; i < res.length; i++) {
						str += `
						 		<div class="phone_list_all">
									<a href="mate20_details.html">
										<input type = "hidden" value="${res[i].bid}" class="goodBid"></input>
										<img src="${res[i].src}"/>
										<span>${res[i].phoneName}</span>
										<span>购机享多重权益 </span>
										<span class ="price">${res[i].price}</span>
									</a>
									<span id="add_cart">加入购物车</span>
								</div>
						 	`;
					}
					this.oGoods.html(str);
					//加载商品
					this.addCart();

					//计算购物车数量
					this.computeNum();
					//点击购物图标跳转到购物车页面
					this.goToCartPage();

				}.bind(this));
			}
			addCart() {
				//点击加入购物车按钮
				//					console.log(this.oGoods.find(".phone_list_all>#add_cart"));
				var _this = this;
				this.oGoods.find(".phone_list_all>#add_cart").click(function () {
					var bid = $(this).parent().find(".goodBid").val();
					console.log(bid);
					var obj = [
						{
							"bid": bid,
							"num": 1//数量
						}
					];
					var objStr = JSON.stringify(obj);
					//把要购买的商品id号和数据保存到购物车中
					//需要获取购物车中的所有信息
					if (localStorage.getItem(_this.phoneNum + "goods")) {
						//如果商品信息存在，判断当前选中的商品编号在原信息中是否有
						//如果信息不存在，返回空，添加一条数据
						//如果有，说明要对该商品添加一个数量
						var storGoods = localStorage.getItem(_this.phoneNum + "goods");
						var storGoodsJson = JSON.parse(storGoods);

						var flag = false;//表示原商品信息中不存在点击的这个商品
						for (var i = 0; i < storGoodsJson.length; i++) {
							if (storGoodsJson[i].bid == bid) {//存在
								storGoodsJson[i].num++;
								flag = true;
								break;
							}
						}
						if (!flag) {//不存在点击的这个商品
							//添加一条数据
							var goodObj = { "bid": bid, "num": 1 };
							storGoodsJson.push(goodObj);

						}
						var storGoodsStr = JSON.stringify(storGoodsJson);
						//把添加好的这些商品保存到购物车
						localStorage.setItem(_this.phoneNum + "goods", storGoodsStr);
					} else {//商品不存在
						//添加一条该商品数据
						localStorage.setItem(_this.phoneNum + "goods", objStr);
					}
					//计算购物车的数量
					_this.computeNum();
				})
			}
			computeNum() {
				//在购物车显示数量cartGoodsNum
				if (localStorage.getItem(this.phoneNum + "goods")) {
					var storGoodsStr = localStorage.getItem(this.phoneNum + "goods");
					//						alert(1);
					console.log(storGoodsStr);
					var storGoodsJosn = JSON.parse(storGoodsStr);
					var num = 0;
					for (var i = 0; i < storGoodsJosn.length; i++) {
						num += Number(storGoodsJosn[i].num);
					}
					console.log(num);
					console.log(this.phoneNum);
					this.Num.text(num);
					this.cartNum.text(num);
				}
			}
			goToCartPage() {
				var _this = this;
				this.oCart.click(function () {
					location.href = "ShoppingCart.html?phoneNum=" + _this.phoneNum;
				});
			}
		}

	</script>
</body>

</html>